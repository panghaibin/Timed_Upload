<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width,user-scalable=no" name="viewport">
    <title>计划任务记录</title>
</head>
<style>
    html, body {
        min-width: 350px;
    }

    a {
        text-decoration: none;
        color: blue;
    }

    table {
        border-collapse: collapse;
    }

    tr:nth-of-type(odd) {
        background: #eee;
    }

    th {
        background: #333;
        color: white;
        font-weight: bold;
    }

    td, th {
        padding: 6px;
        border: 1px solid #ccc;
        text-align: left;
    }

    @media only screen and (max-width: 830px),
    (min-device-width: 830px) and (max-device-width: 830px) {

        /* Force table to not be like tables anymore */
        table, thead, tbody, th, td, tr {
            display: block;
        }

        /* Hide table headers (but not display: none;, for accessibility) */
        thead tr {
            position: absolute;
            top: -9999px;
            left: -9999px;
        }

        tr, tr:nth-of-type(odd) {
            background: #ffffff;
            border: 1px solid #ccc;
        }

        td {
            /* Behave  like a "row" */
            border: none;
            border-bottom: 1px solid #eee;
            position: relative;
            padding-left: 23%;
        }

        td:before {
            /* Now like a table header */
            position: absolute;
            /* Top/left values mimic padding */
            top: 6px;
            left: 6px;
        {#width: 30%;#} padding-right: 10px;
            white-space: nowrap;
        }

        /*
        Label the data
        */
    {% for th in thead %}
        td:nth-of-type({{ loop.index }}):before {
            content: "{{ th }}";
        }
    {% endfor %}
    }
</style>
<body>
<a href="antigen">计划任务上传</a> | 计划任务记录 | <a href="logout">退出</a>
<p>{{ username }}的计划任务记录</p>
<p>
    <button onclick="location.reload();">刷新</button>
</p>
<form id="h-form" action="" method="post">
    {#<input type="hidden" name="_token" value="{{ csrf_token() }}">#}
    <input type="hidden" name="username" value="{{ username }}">
    <input id="history" type="hidden" name="history" value="">
    <input id="action" type="hidden" name="action" value="">
</form>
<table>
    <thead>
    <tr>
        {% for th in thead %}
            <th>{{ th }}</th>
        {% endfor %}
    </tr>
    </thead>
    <tbody>
    {% for item in items %}
        <tr>
            {% if role == 'admin' %}
                <td>{{ item.username }}</td>
                <td>{{ item.name }}</td>
            {% endif %}
            <td><span style="color: {{ item.status_color }}">{{ item.status }}</span></td>
            <td>{{ item.sch_time }}</td>
            <td>{{ item.real_time }}</td>
            <td>{{ item.img }}</td>
            <td>{{ item.cps }}</td>
            <td>{{ item.times }}</td>
            <td>{{ item.type }}</td>
            <td>{{ item.method }}</td>
            <td>{{ item.result }}</td>
            <td>
                <a href="javascript:void(0)" onclick="del_history('{{ item.id }}')">删除</a>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
</body>
<script>
    function del_history(hid) {
        let confirm_msg = confirm('确定删除该记录？');
        if (confirm_msg) {
            document.getElementById('history').value = hid;
            document.getElementById('action').value = 'delete';
            document.getElementById('h-form').submit();
        }
    }
</script>
</html>